# Prisma Seed è„šæœ¬ä½¿ç”¨è¯´æ˜

## æ¦‚è¿°

`prisma/seed.ts` è„šæœ¬ç”¨äºåˆå§‹åŒ–æ•°æ®åº“ï¼Œåˆ›å»ºæµ‹è¯•è´¦å·ã€‚

## åˆ›å»ºçš„æµ‹è¯•è´¦å·

è„šæœ¬ä¼šåˆ›å»ºä»¥ä¸‹ 3 ä¸ªæµ‹è¯•è´¦å·ï¼š

| é‚®ç®± | å¯†ç  | è§’è‰² | è¯´æ˜ |
|------|------|------|------|
| admin@test.com | password123 | admin | ç®¡ç†å‘˜è´¦å· |
| designer@test.com | password123 | designer | è®¾è®¡å¸ˆè´¦å·ï¼ˆåŒ…å« Designer æ¡£æ¡ˆï¼‰ |
| client@test.com | password123 | client | å®¢æˆ·è´¦å· |

## å®‰è£…ä¾èµ–

åœ¨è¿è¡Œ seed è„šæœ¬ä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…ä¾èµ–ï¼š

```bash
npm install
```

è¿™ä¼šå®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š
- `bcryptjs` - ç”¨äºå¯†ç åŠ å¯†
- `tsx` - ç”¨äºè¿è¡Œ TypeScript æ–‡ä»¶
- `@types/bcryptjs` - TypeScript ç±»å‹å®šä¹‰

## è¿è¡Œ Seed è„šæœ¬

### æ–¹æ³• 1ï¼šä½¿ç”¨ npm è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
npm run db:seed
```

### æ–¹æ³• 2ï¼šä½¿ç”¨ Prisma å‘½ä»¤

```bash
npx prisma db seed
```

### æ–¹æ³• 3ï¼šç›´æ¥è¿è¡Œ

```bash
npx tsx prisma/seed.ts
```

## æ•°æ®åº“è¿ç§»

åœ¨è¿è¡Œ seed è„šæœ¬ä¹‹å‰ï¼Œç¡®ä¿å·²ç»ï¼š

1. **è¿è¡Œæ•°æ®åº“è¿ç§»**ï¼ˆå¦‚æœ User æ¨¡å‹æœ‰ password å­—æ®µçš„å˜æ›´ï¼‰ï¼š
   ```bash
   npx prisma migrate dev --name add_user_password
   ```

2. **æˆ–è€…é‡ç½®æ•°æ®åº“**ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ï¼š
   ```bash
   npx prisma migrate reset
   ```
   è¿™ä¼šè‡ªåŠ¨è¿è¡Œ seed è„šæœ¬ã€‚

## è„šæœ¬åŠŸèƒ½

- âœ… ä½¿ç”¨ `bcrypt.hash()` åŠ å¯†å¯†ç ï¼ˆ10 è½®ï¼‰
- âœ… ä½¿ç”¨ `upsert` ç¡®ä¿è´¦å·ä¸ä¼šé‡å¤åˆ›å»º
- âœ… ä¸ºè®¾è®¡å¸ˆè´¦å·è‡ªåŠ¨åˆ›å»º Designer æ¡£æ¡ˆ
- âœ… æä¾›æ¸…æ™°çš„æ‰§è¡Œæ—¥å¿—å’Œè´¦å·ä¿¡æ¯è¾“å‡º

## æ³¨æ„äº‹é¡¹

1. **å¯†ç åŠ å¯†**ï¼šæ‰€æœ‰å¯†ç ä½¿ç”¨ bcrypt åŠ å¯†ï¼Œç›å€¼è½®æ•°ä¸º 10
2. **å¹‚ç­‰æ€§**ï¼šè„šæœ¬ä½¿ç”¨ `upsert`ï¼Œå¯ä»¥å®‰å…¨åœ°å¤šæ¬¡è¿è¡Œ
3. **è®¾è®¡å¸ˆæ¡£æ¡ˆ**ï¼šè®¾è®¡å¸ˆè´¦å·ä¼šè‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„ Designer æ¡£æ¡ˆï¼ŒåŒ…å«é»˜è®¤æŠ€èƒ½å’Œå‚æ•°
4. **ç¯å¢ƒå˜é‡**ï¼šç¡®ä¿ `.env` æˆ– `.env.local` ä¸­é…ç½®äº†æ­£ç¡®çš„ `DATABASE_URL`

## è¾“å‡ºç¤ºä¾‹

```
å¼€å§‹æ‰§è¡Œ seed è„šæœ¬...
âœ… åˆ›å»ºç®¡ç†å‘˜è´¦å·: admin@test.com
âœ… åˆ›å»ºè®¾è®¡å¸ˆè´¦å·: designer@test.com
âœ… åˆ›å»ºè®¾è®¡å¸ˆæ¡£æ¡ˆ
âœ… åˆ›å»ºå®¢æˆ·è´¦å·: client@test.com

ğŸ‰ Seed è„šæœ¬æ‰§è¡Œå®Œæˆï¼

æµ‹è¯•è´¦å·ä¿¡æ¯ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç®¡ç†å‘˜: admin@test.com / password123
è®¾è®¡å¸ˆ: designer@test.com / password123
å®¢æˆ·:   client@test.com / password123
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

## æ•…éšœæ’é™¤

### é”™è¯¯ï¼šCannot find module 'bcryptjs'

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
npm install bcryptjs @types/bcryptjs tsx
```

### é”™è¯¯ï¼špassword å­—æ®µä¸å­˜åœ¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿å·²è¿è¡Œæ•°æ®åº“è¿ç§»ï¼š
   ```bash
   npx prisma migrate dev
   ```
2. é‡æ–°ç”Ÿæˆ Prisma Clientï¼š
   ```bash
   npx prisma generate
   ```

### é”™è¯¯ï¼šDATABASE_URL æœªé…ç½®

**è§£å†³æ–¹æ¡ˆ**ï¼š
åœ¨ `.env` æˆ– `.env.local` æ–‡ä»¶ä¸­æ·»åŠ ï¼š
```
DATABASE_URL="postgresql://user:password@localhost:5432/dbname"
```
